<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é«˜ä¸­æ”¿æ²»å¤§é¢˜æ¨¡æ¿æŸ¥è¯¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      background: #f9fafb;
      padding: 1rem;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    input, textarea, select, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin: 0.25rem 0;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .template {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 1rem;
      margin-top: 1rem;
    }
    .template button {
      width: auto;
      margin-right: 0.5rem;
      background-color: #6c757d;
    }
    .template button:hover {
      background-color: #495057;
    }
    .highlight {
      background: yellow;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin-top: 3rem;
    }
  </style>
</head>
<body>

  <h1>é«˜ä¸­æ”¿æ²»å¤§é¢˜æ¨¡æ¿æŸ¥è¯¢</h1>

  <input id="searchInput" placeholder="è¾“å…¥å…³é”®è¯æœç´¢..." />
  <button onclick="searchTemplates()">ğŸ” æœç´¢</button>

  <hr>

  <h2>â• æ·»åŠ æ–°æ¨¡æ¿</h2>
  <input id="newCategory" placeholder="æ‰€å±æ¨¡å—ï¼ˆå¦‚ æ”¿æ²»ç”Ÿæ´»ï¼‰" />
  <input id="newTitle" placeholder="æ¨¡æ¿æ ‡é¢˜ï¼ˆå¦‚ æ”¿åºœèŒèƒ½ï¼‰" />
  <textarea id="newContent" rows="4" placeholder="æ¨¡æ¿å†…å®¹..."></textarea>
  <button onclick="addTemplate()">âœ… æ·»åŠ æ¨¡æ¿</button>

  <hr>

  <h2>ğŸ“Œ æ¨¡æ¿ç´¢å¼•</h2>
  <div id="indexContainer"></div>

  <hr>

  <h2>ğŸ“š æ¨¡æ¿å†…å®¹</h2>
  <div id="templateContainer"></div>

  <footer>
    ç”± <strong>ä¸€ä¸ªé«˜ä¸­ç”Ÿ</strong> ç‹¬ç«‹å¼€å‘è®¾è®¡ã€‚<br>
    åŠŸèƒ½æ¶µç›–æ¨¡æ¿æŸ¥è¯¢ã€å¢åˆ æ”¹æŸ¥ã€æµè§ˆå™¨æœ¬åœ°ä¿å­˜ã€‚<br>
    å¦‚éœ€äº¤æµå­¦ä¹ æˆ–è·å–æºç ï¼Œè¯·è”ç³»æˆ‘ã€‚
    é‚®ç®±ï¼šgzdzjkh2526@gmail.com
  </footer>

  <script>
    // é»˜è®¤æ¨¡æ¿
    const defaultTemplates = [
      {
        id: "zhengfu",
        category: "æ”¿æ²»ç”Ÿæ´»",
        title: "æ”¿åºœèŒèƒ½",
        content: "æ”¿åºœè¦å±¥è¡Œå¥½ç»„ç»‡ç»æµã€ä¿éšœæ°‘ç”Ÿã€ç»´æŠ¤ç¨³å®šã€æœåŠ¡ç¤¾ä¼šç­‰åŸºæœ¬èŒèƒ½ï¼Œä¾æ³•è¡Œæ”¿ï¼Œåšåˆ°æƒä¸ºæ°‘æ‰€ç”¨ã€‚"
      },
      {
        id: "gongmin",
        category: "æ”¿æ²»ç”Ÿæ´»",
        title: "å…¬æ°‘æƒåˆ©",
        content: "å…¬æ°‘äº«æœ‰å¹¿æ³›çš„æ”¿æ²»æƒåˆ©å’Œè‡ªç”±ï¼Œä¾æ³•è¡Œä½¿é€‰ä¸¾æƒã€è¨€è®ºè‡ªç”±ã€ç›‘ç£æƒç­‰ï¼Œæ˜¯ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»æ”¿æ²»çš„ä½“ç°ã€‚"
      },
      {
        id: "wuzhi",
        category: "å“²å­¦åŸç†",
        title: "ç‰©è´¨ä¸æ„è¯†",
        content: "ç‰©è´¨æ˜¯ä¸–ç•Œçš„æœ¬åŸï¼Œæ„è¯†æ˜¯å¯¹å®¢è§‚å­˜åœ¨çš„ä¸»è§‚åæ˜ ï¼Œè¦æ±‚æˆ‘ä»¬åšæŒå®äº‹æ±‚æ˜¯ã€ä¸€åˆ‡ä»å®é™…å‡ºå‘ã€‚"
      }
    ];

    // è·å–æ‰€æœ‰æ¨¡æ¿
    function getTemplates() {
      const saved = JSON.parse(localStorage.getItem("userTemplates") || "[]");
      return [...defaultTemplates, ...saved];
    }

    // æœç´¢
    function searchTemplates() {
      const keyword = document.getElementById("searchInput").value.trim();
      if (!keyword) return;
      const match = getTemplates().find(t =>
        t.title.includes(keyword) || t.content.includes(keyword)
      );
      if (match) {
        location.hash = `#${match.id}`;
      } else {
        alert("æœªæ‰¾åˆ°ç›¸å…³æ¨¡æ¿ã€‚");
      }
    }

    // æ·»åŠ æ¨¡æ¿
    function addTemplate() {
      const category = document.getElementById("newCategory").value.trim();
      const title = document.getElementById("newTitle").value.trim();
      const content = document.getElementById("newContent").value.trim();
      if (!category || !title || !content) {
        alert("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ã€‚");
        return;
      }
      const id = "user_" + Date.now();
      const newTemplate = { id, category, title, content };
      const saved = JSON.parse(localStorage.getItem("userTemplates") || "[]");
      saved.push(newTemplate);
      localStorage.setItem("userTemplates", JSON.stringify(saved));
      document.getElementById("newCategory").value = "";
      document.getElementById("newTitle").value = "";
      document.getElementById("newContent").value = "";
      renderTemplates(getTemplates());
    }

    // åˆ é™¤æ¨¡æ¿
    function deleteTemplate(id) {
      const saved = JSON.parse(localStorage.getItem("userTemplates") || "[]");
      const updated = saved.filter(t => t.id !== id);
      localStorage.setItem("userTemplates", JSON.stringify(updated));
      renderTemplates(getTemplates());
    }

    // ç¼–è¾‘ç›¸å…³
    let editingId = null;

    function startEdit(id) {
      editingId = id;
      renderTemplates(getTemplates());
    }

    function cancelEdit() {
      editingId = null;
      renderTemplates(getTemplates());
    }

    function saveEdit(id) {
      const category = document.getElementById("editCategory").value.trim();
      const title = document.getElementById("editTitle").value.trim();
      const content = document.getElementById("editContent").value.trim();
      if (!category || !title || !content) {
        alert("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ã€‚");
        return;
      }
      const saved = JSON.parse(localStorage.getItem("userTemplates") || "[]");
      const updated = saved.map(t => t.id === id ? { ...t, category, title, content } : t);
      localStora